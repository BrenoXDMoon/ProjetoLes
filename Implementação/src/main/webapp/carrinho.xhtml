<?xml version="1.0" encoding="ISO-8859-1" ?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml"
	xmlns:h="http://java.sun.com/jsf/html"
	xmlns:f="http://xmlns.jcp.org/jsf/core"
	xmlns:ui="http://xmlns.jcp.org/jsf/facelets"
	xmlns:xlink="http://www.w3.org/1999/xlink"
	xmlns:jsf="http://xmlns.jcp.org/jsf"
	xmlns:pt="http://xmlns.jcp.org/jsf/passthrough">

<head>
<meta name="viewport" content="width=device-width, initial-scale=1.0" />
<link href="#{request.contextPath}/assets/css/style.css"
	rel="stylesheet" />
<link href="#{request.contextPath}/assets/css/bootstrap.min.css"
	rel="stylesheet" />
<link href="#{request.contextPath}/assets/css/custom.css"
	rel="stylesheet" />
<title>Carrinho</title>
</head>

<body class="bg-dark text-white">
	<header class="site-header sticky-top py-1"> <nav
		class="container d-flex flex-column flex-md-row justify-content-between">
	<a class="py-2 d-none d-md-inline-block"
		href="#{request.contextPath}/index.xhtml">NewStation</a> <a
		class="py-2 d-none d-md-inline-block"
		href="#{request.contextPath}/cliente/login.xhtml">Login</a> <a
		class="py-2 d-none d-md-inline-block"
		href="#{request.contextPath}/cliente/form.xhtml">Cadastre-se</a> <a
		class="py-2 d-none d-md-inline-block"
		href="#{request.contextPath}/carrinho.xhtml">Carrinho</a> </nav> </header>
	<section class="infoSection container">
	<h2 class="infoSection-titulo">Seu carrinho</h2>

	<form class="formularioDoCarrinho" method="post" jsf:id="formCarrinho">
		<table class="formularioDoCarrinho-tabela">
			<thead class="formularioDoCarrinho-cabecalho">
				<tr>
					<th></th>
					<th class="formularioDoCarrinho-cabecalho-item">Item</th>
					<th
						class="formularioDoCarrinho-cabecalho-item formularioDoCarrinho-cabecalho-preco">Preço</th>
					<th class="formularioDoCarrinho-cabecalho-item">Qtd</th>
					<th class="formularioDoCarrinho-cabecalho-item">Total</th>
					<th></th>
				</tr>
			</thead>
			<tbody>

				<ui:repeat var="carrinhoItem" value="#{carrinhoBean.itens}"
					varStatus="loop">
					<tr>
						<td class="formularioDoCarrinho-item"><a
							href="#{request.contextPath}/album-detalhe.xhtml?id=#{carrinhoItem.carta.id}">
								<img class="formularioDoCarrinho-item-imagem"
								src="#{request.contextPath}/file/#{carrinhoItem.carta.imagemPath}" />
						</a></td>
						<td class="formularioDoCarrinho-item">
							<h2 class="formularioDoCarrinho-item-titulo">#{carrinhoItem.carta.nome}</h2>
						</td>
						<td
							class="formularioDoCarrinho-item formularioDoCarrinho-item-preco">R$#{carrinhoItem.carta.preco}</td>
						<td class="formularioDoCarrinho-item"><input
							class="formularioDoCarrinho-item-quantidade" type="number"
							min="1" jsf:value="#{carrinhoBean.itens[loop.index].quantidade}" /></td>
							<td>
							<h:selectOneListbox value="#{carrinhoItem.carta.quantidade}" styleClass="form-select">
	                        	<f:selectItems value="#{carrinhoItem.quantidade}" var="quantidade" itemLabel="#{quantidade}" itemValue="#{quantidade}"/> 
                        </h:selectOneListbox>
                        </td>
						<td
							class="formularioDoCarrinho-item formularioDoCarrinho-item-precoTotal"
							title="Preço unitário: #{carrinhoItem.carta.preco}">R$#{carrinho.getTotal(carrinhoItem)}</td>
						<td class="formularioDoCarrinho-item"><a
							jsf:action="#{carrinhoBean.remover(carrinhoItem)}"> <img
								class="formularioDoCarrinho-item-remover-imagem"
								src="#{request.contextPath}/resources/imagens/trash.png" alt="X"
								title="Remover" />
						</a></td>
					</tr>
				</ui:repeat>

			</tbody>
			<tfoot class="formularioDoCarrinho-rodape">
				<tr>
					<td
						class="formularioDoCarrinho-rodape-item formularioDoCarrinho-finalizar"
						colspan="3">
						<button class="formularioDoCarrinho-finalizar-botao" type="submit"
							jsf:action="checkout?faces-redirect=true">
							Finalizar<span class="formularioDoCarrinho-finalizar-botao-texto"
								role="presentation"> compra</span>
						</button>
					</td>
					<td class="formularioDoCarrinho-rodape-item">
						<button class="formularioDoCarrinho-atualizar" type="submit"
							jsf:id="btnAtualizar">Atualizar</button>
					</td>
					<td class="formularioDoCarrinho-rodape-item">R$#{carrinhoCompras.getTotal()}</td>
					<td></td>
				</tr>
			</tfoot>
		</table>
	</form>

	</section>
</body>

</html>
