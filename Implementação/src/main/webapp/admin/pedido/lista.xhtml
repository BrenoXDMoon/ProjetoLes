<?xml version="1.0" encoding="ISO-8859-1" ?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml"
	xmlns:h="http://xmlns.jcp.org/jsf/html"
	xmlns:f="http://xmlns.jcp.org/jsf/core"
	xmlns:ui="http://xmlns.jcp.org/jsf/facelets"
	xmlns:c="http://java.sun.com/jsp/jstl/core">
<head>
<meta charset="UTF-8" />
<meta http-equiv="X-UA-Compatible" content="IE=edge" />
<meta name="viewport" content="width=device-width, initial-scale=1.0" />
<link href="#{request.contextPath}/assets/css/bootstrap.min.css" rel="stylesheet" />
<link href="#{request.contextPath}/assets/css/style.css" rel="stylesheet" />

<title>Lista Pedidos</title>
</head>




<body class="bg-dark text-white overflow-hidden">
	<header class="site-header py-1"> 
		<nav class="container d-flex flex-column flex-md-row justify-content-between">
			<a class="py-2 d-none d-md-inline-block" href="#{request.contextPath}/index.xhtml">NewStation</a>
			<a class="py-2 d-none d-md-inline-block" href="#{request.contextPath}/admin.xhtml">Admin</a>
		</nav> 
	</header>
	<section class="container-fluid mt-5">
		<div class="row">
		<nav id="sidebarMenu" class="col-2 d-md-block bg-dark sidebar collapse">
			<div class="position-sticky pt-3">
				<ul class="nav flex-column">
					<li class="nav-item">
						<a class="nav-link active" aria-current="page" href="#{request.contextPath}/admin/admin.xhtml">
							<span data-feather="home">Dashboard</span>
						</a>
					</li>
					<li class="nav-item">
						<a class="nav-link" href="#">
							<span data-feather="file"></span>
							<a class="py-2 d-none d-md-inline-block ml-3" href="#{request.contextPath}/admin/pedido/lista.xhtml">Pedidos</a>
						</a>
					</li>
					<span class="font-weight-bold">Cartas</span>
					<li class="nav-item">
					<a class="nav-link" href="#{request.contextPath}/admin/cartas/lista.xhtml">
						Lista de Cartas
					</a>
					</li>
					<li class="nav-item">
						<a class="nav-link" href="#{request.contextPath}/admin/cartas/form.xhtml">
							Cadastro de Cartas
						</a>
					</li>
					<spam class="font-weight-bold">Cliente</spam>
					<li class="nav-item">
						<a class="nav-link" href="#{request.contextPath}/admin/cliente/lista.xhtml">
							Lista de Clientes
						</a>
					</li>
					<li class="nav-item">
						<a class="nav-link" href="#{request.contextPath}/cliente/form.xhtml">
							Cadastro de Clientes
						</a>
					</li>

					<spam class="font-weight-bold">Cupons</spam>
					<li class="nav-item">
						<a class="nav-link" href="#{request.contextPath}/admin/cupom/lista.xhtml">
							Lista de Cupons
						</a>
					</li>
					<li class="nav-item">
						<a class="nav-link" href="#{request.contextPath}/admin/cupom/form.xhtml">
							Cadastro de Cupons
						</a>
					</li>
				</ul>
				</div>
			</nav>
		<div class="col-10">
		<h2 class='text-white'>Pedidos</h2>#{pedidoBean.paginacao}
				<h:dataTable var="ped" value="#{pedidoBean.todosPedidos()}" class="table table-bordered table-striped table-hover" first="#{pedidoBean.paginacao}">
				<h:form styleClass="mb-3">
					#{pedidoBean.paginacaoAdmin()}
					#{pedidoBean.paginacao + 1} - #{pedidoBean.paginacao + pedidoBean.linhasNaTabela}  - #{pedidoBean.totalPedidos}
					<h:selectOneMenu  value = "#{pedidoBean.linhasNaTabela}" class="ml-3" onchange="trocaIndex()"> 
					   <f:selectItem itemValue = "#{pedidoBean.linhasNaTabela}" itemLabel = " #{pedidoBean.linhasNaTabela}" />
					   <f:selectItem itemValue = "5" itemLabel = " 5" /> 
					   <f:selectItem itemValue = "10" itemLabel = "10" />
					   <f:selectItem itemValue = "15" itemLabel = "15" />
					</h:selectOneMenu >
					<h:commandButton value="Confirmar" class="btn btn-info ml-3 d-none"  id="botaoIndex"/>  
				</h:form>
				<h:dataTable var="ped" value="#{pedidoBean.todosPedidos()}" class="table table-bordered table-striped table-hover" first="#{pedidoBean.paginacao}" rows="#{pedidoBean.linhasNaTabela}">
					<h:column>
						<f:facet name="header">C�digo</f:facet>
						<a class="decoration-none font-weight-bold text-blue align-middle" href="#{request.contextPath}/admin/pedido/edit-form.xhtml?id=#{ped.id}">#{ped.uuid}</a>       
					</h:column>
					
					<h:column>
						<f:facet name="header">Total</f:facet>
						#{ped.total}
					</h:column>
					<h:column >
						<f:facet name="header">Nome do Produto</f:facet>
						
						<ui:repeat value="#{ped.itens.toArray()}" var="itens">
							#{itens.carta.nome} -
						</ui:repeat>
					</h:column>
					<h:column styleClass="w-min">
						<f:facet name="header">Imagem</f:facet>
						<ui:repeat value="#{ped.itens.toArray()}" var="itens">
							<img src="#{request.contextPath}/file/#{itens.carta.imagemPath}"
							width="30%" height="30%" alt="#{itens.carta.nome}" />
							Quantidade: #{itens.quantidade}<p></p>
						</ui:repeat>
					</h:column>
					<h:column>
						<f:facet name="header">Status </f:facet>
						#{pedidoBean.status(ped)}
						<h:link outcome="aceitaTroca?id=#{ped.id}" rendered="#{pedidoBean.troca}">#{ped.statusPedido}</h:link>
						<h:outputLabel value="#{ped.statusPedido}" styleClass="align-middle" rendered="#{!pedidoBean.troca}"/> 
					</h:column>
					
				</h:dataTable>
				<h:form>
					<h:commandButton value="Voltar" action="#{pedidoBean.paginacaoRetorna}" class="btn btn-info" rendered="#{pedidoBean.isZero()}"/>
					<h:commandButton value="Avan�ar" action="#{pedidoBean.paginacaoAvanca}" class="btn btn-info ml-4" rendered="#{pedidoBean.isMaximo()}"/>            	
				</h:form>
				
		</div>
	</div>

	</section>

</body>

<script src="#{request.contextPath}/assets/js/bootstrap.min.js"></script>
<script>
function trocaIndex(){
	document.getElementById("j_idt2:botaoIndex").click();
	
}
</script>

</html>